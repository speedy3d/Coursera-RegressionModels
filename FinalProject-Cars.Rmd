---
title: "Regression Models - Transmission and MPG"
author: "Ryan Wissman"
date: "Friday, March 20, 2015"
output: pdf_document
---

##Executive Summary

Fuel efficienty and transmission type are both very important and greatly debated factors when selecting a new car. This report examines the relationship between tranmission type and fuel economy to determine if there is any MPG benefit to purchasing a car of either type transmission. The data used in this report is from the 1974 Motor Trend US magazine.

<results summary>

##Exploring the Data

First the mtcars data is loaded and some brief exploratory statistics are discovered.

```{r}
data(mtcars); attach(mtcars)
head(mtcars,1) #Examine how the data is structured in mtcars
mean_a <- mean(mpg[am=="0"]) #Automatic Transmission mean
mean_m <- mean(mpg[am=="1"]) #Manual Transmission mean
```

Quickly examining the data to determine the means we find that the average fuel economy among automatic cars is 17.14 MPG whereas the average among manual transmissions is 24.39 MPG. Furthermore, according to a boxplot of the data (*see* **Figure 1**) we could guess that the fuel efficiency of a manual transmission is greater than that of an automatic transmission. The average and median is MPG for manual transmission is distinctly higher than that of automatic transmissions. However, we cannot yet make a conclusion on based on this chart alone. First we will need to determine if a relationship does exist by using regression. 

#Regression Models

First we try a linear model using mpg as the outcome and transmission type (variable am, "0" denotes automatic whereas "1" denotes manual) as the predictor.

###Model: Transmission Type Only

```{r results='hide'}
model_am <- lm(mpg ~ am)
summary(model_am)$adj.r.squared
```

Using this model we can determine that this model can only explain about 34% (Adjusted R-squared value of 0.3598) of the variance in MPG. Transmission alone does not look like it accounts for enough of the variation to be significant by itself. Therefore we should try another model to examine the other variables in the mtcars dataset.

###Model: All Variables 

```{r}
model_full <- lm(mpg ~ ., mtcars)
summary(model_full)$adj.r.squared
```

Fitting all the variables can explain about 81% (Adjusted R-Squared 0.8066) of the variance in MPG. Accoding to the matrix scatterplot of all the variables in mtcars (*see* **Figure 2**) the there are a number of other variables that show significant correlation with MPG. Therefore we can probably create a better model using only the most significant variables. 

##Model: Best

Using R step function to step through the iterations of variables to determine which model would be the best. 

```{r}
model_best <- step(model_full, trace=0)
summary(model_best)
```

This model now accounts for about 83% of the variance which is better than our model that accounts for all the variables. The final model included three variables (weight, 1/4 mile time, and transmission). 

```{r}
anova(model_am, model_full, model_best)
```

##Residuals

According to the Normal Q-Q plot (*see* **Figure 3**) we see that the residuals appear to be normally distributed as the data points fit quite closely to the line.


#Appendix

Data and figures that accompany the report.

##Figure 1: Boxplot summarizing both automatic and manual transmission types relative to MPG

```{r}
boxplot(mpg ~ am, xlab="Transmission Type", ylab="Miles per Gallon (MPG)", xaxt="n", 
        main="Transmission and MPG",
        col=c("green", "red"))
axis(1, at=1:2, labels=c("Automatic", "Manual"))
```

##Figure 2: Matrix Scatterplot of all Variables

Matrix scatterplot covering the variances between many different variables in the mtcars dataset.  

```{r}
pairs(mtcars, main="Matrix Scatterplot of all Variables", panel=function(x,y){
  points(x,y)
  abline(lm(y~x), col="red")
})
```

##Figure 3: Residual Plots

Residuals plots for the best fit model.

```{r}
par(mfrow=c(2,2))
plot(model_best)
```
